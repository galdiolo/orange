function $id(e){return document.getElementById(e)}function Output(e){var t=$id("messages");t.innerHTML=e+t.innerHTML}function Init(){var e=$id("fileselect"),t=$id("filedrag"),n=$id("submitbutton");e.addEventListener("change",FileSelectHandler,!1);var r=new XMLHttpRequest;r.upload&&(t.addEventListener("dragover",FileDragHover,!1),t.addEventListener("dragleave",FileDragHover,!1),t.addEventListener("drop",FileSelectHandler,!1),t.style.display="block",n.style.display="none")}function FileDragHover(e){e.stopPropagation(),e.preventDefault(),e.target.className="dragover"==e.type?"hover":""}function FileSelectHandler(e){FileDragHover(e);for(var t=e.target.files||e.dataTransfer.files,n=0,r;r=t[n];n++)ParseFile(r),UploadFile(r)}function ParseFile(e){Output("<p>File information: <strong>"+e.name+"</strong> type: <strong>"+e.type+"</strong> size: <strong>"+e.size+"</strong> bytes</p>")}function UploadFile(e){var t=new XMLHttpRequest;t.addEventListener("error",function(e){var n=JSON.parse(t.responseText);Output("<p>Unknown Error</p>")},!1),t.addEventListener("load",function(e){var n=JSON.parse(t.responseText);Output("<p>"+n.msg+"</p>")},!1);var n=$id("MAX_FILE_SIZE").value;e.size>=n&&Output("<p>File size to large "+n/1024/1024+"mb or smaller.</p>"),t.upload&&"application/zip"==e.type&&e.size<=n&&(t.open("POST",$id("upload").action,!0),t.setRequestHeader("X_FILENAME",e.name),t.send(e))}window.File&&window.FileList&&window.FileReader&&Init();